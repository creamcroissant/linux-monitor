import{X as e,r as a,h as l,ax as s,y as r,z as o,A as u,I as n,aq as t,G as d,H as i,ag as m,aB as p,aw as c,P as g,V as v,J as f,a4 as b,L as h}from"./vendor-wniUkaaU.js";import{_}from"./_plugin-vue_export-helper-BCo6x5W8.js";import{a as w}from"./element-plus-BmMKkfCB.js";const y={class:"login-container"},V={key:0,class:"login-tips"},x=_({__name:"Login",setup(_){const x=p(),k=s(),q=c(),I=e({username:"",password:"",remember:!1}),U=a(!1),j=a("");a(null);const L={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},S=async()=>{var e,a;if(!U.value){U.value=!0,j.value="";try{await q.dispatch("login",{username:I.username,password:I.password}),w.success("登录成功");const e=x.query.redirect||"/";k.push(e)}catch(l){j.value=(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.error)||"用户名或密码错误"}finally{U.value=!1}}};return l((()=>{localStorage.getItem("token")&&k.push("/");const e=localStorage.getItem("username");e&&(I.username=e,I.remember=!0)})),(e,a)=>{const l=m("el-input"),s=m("el-form-item"),p=m("el-checkbox"),c=m("el-button"),_=m("el-alert"),w=m("el-form"),x=m("el-card"),k=t("loading");return o(),r("div",y,[a[7]||(a[7]=u("div",{class:"login-logo"},[u("h1",null,"系统监控平台")],-1)),n((o(),d(x,{class:"login-card"},{header:i((()=>a[3]||(a[3]=[u("div",{class:"card-header"},[u("h2",null,"用户登录")],-1)]))),default:i((()=>[g(w,{ref:"loginForm",model:I,rules:L,"label-width":"80px",onSubmit:v(S,["prevent"])},{default:i((()=>[g(s,{label:"用户名",prop:"username"},{default:i((()=>[g(l,{modelValue:I.username,"onUpdate:modelValue":a[0]||(a[0]=e=>I.username=e),placeholder:"请输入用户名","prefix-icon":"User",onKeyup:b(S,["enter"])},null,8,["modelValue"])])),_:1}),g(s,{label:"密码",prop:"password"},{default:i((()=>[g(l,{modelValue:I.password,"onUpdate:modelValue":a[1]||(a[1]=e=>I.password=e),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":"",onKeyup:b(S,["enter"])},null,8,["modelValue"])])),_:1}),g(s,null,{default:i((()=>[g(p,{modelValue:I.remember,"onUpdate:modelValue":a[2]||(a[2]=e=>I.remember=e)},{default:i((()=>a[4]||(a[4]=[h("记住登录状态")]))),_:1},8,["modelValue"])])),_:1}),g(s,null,{default:i((()=>[g(c,{type:"primary",loading:U.value,class:"login-button",onClick:S},{default:i((()=>a[5]||(a[5]=[h(" 登录 ")]))),_:1},8,["loading"])])),_:1}),j.value?(o(),r("div",V,[g(_,{title:j.value,type:"error","show-icon":"",closable:!1},null,8,["title"])])):f("",!0),a[6]||(a[6]=u("div",{class:"default-account"},[u("p",null,"默认账号：admin"),u("p",null,"默认密码：admin")],-1))])),_:1},8,["model"])])),_:1})),[[k,U.value]])])}}},[["__scopeId","data-v-c2b1b980"]]);export{x as default};
